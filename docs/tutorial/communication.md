# フロントエンドとバックエンドの通信

## 通信方式一覧
| 通信方式   | 特徴                                      | 利用例                                                     |
|------------|-----------------------------------------|------------------------------------------------------------|
| HTTP/3    | 高速接続確立、UDPベース、パケットロス耐性  | ユーザー情報取得、低待機認証情報取得                         |
| WebSocket | 双方向通信、低レイテンシ                   | チャット、リアルタイム通知                                    |
| gRPC      | バイナリプロトコル、効率的なデータ転送      | マイクロサービス間の大量データ伝送、分散計算                  |

### 認証と認可
- **方法**：  
  - JWTを使用した認証とリフレッシュトークン管理
- **具体例**：  
  - ログイン時のJWT発行、失効リスト管理

### エラーハンドリング
- **方法**：  
  - 共通エラーハンドリングメカニズムの実装  
  - エラーコード・メッセージの標準化
- **注意点**：  
  - ユーザーへ適切なフィードバック、再試行機構の実装

### データフォーマット
- **JSON**：  
  - 人間可読、RESTful API向け
- **プロトコルバッファ**：  
  - バイナリ形式で高速・効率的なデータシリアライズ

### セキュリティ対策
- HTTPS、JWT、CSRF対策、入力値検証、セキュリティヘッダーの設定などを実施  
- **具体例**：  
  - フォーム入力データのサニタイズ、SQLインジェクション防止

各プロトコルは、低レイテンシ、エラーハンドリング、セキュリティ面での最適化が行われています。  
具体的には、HTTP/3はUDPベースの高速ハンドシェイクを実現し、WebSocketは双方向通信の即時性を、gRPCはバイナリプロトコルによる通信効率の向上を担保します。  
また、JWT認証により各リクエストの信頼性を確保し、定期的なセキュリティレビューと更新によって最新の脅威に対応する設計です。

<!-- 補足: 各プロトコルの高度な利用ケース -->
通信プロトコルは、パフォーマンス、信頼性、及びセキュリティの観点から最適なものを選択します。各技術の内部動作やトラフィック解析ツールを用いたモニタリングも導入してください。

フロントエンドからバックエンドへのリクエストは、適切な認証と認可を経て処理されます。バックエンドは、各種サービスやデータベースと連携し、必要なデータをフロントエンドに返します。

```mermaid
sequenceDiagram
    participant Flutter as フロントエンド (Flutter)
    participant Golang as バックエンド (Golang)
    participant DB as データベース

    Flutter->>Golang: HTTP/3, WebSocket, gRPC リクエスト
    Golang->>DB: データベースクエリ
    DB-->>Golang: クエリ結果
    Golang-->>Flutter: レスポンスデータ
