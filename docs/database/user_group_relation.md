# ユーザーグループ関連テーブル設計書

## 概要
各グループに所属するユーザーを管理するリレーションテーブルです。

## テーブル定義
- テーブル名: `user_group_relation`

| カラム名   | データ型     | 制約                                                            | 説明                                          |
|------------|--------------|-----------------------------------------------------------------|-----------------------------------------------|
| id         | INT          | PRIMARY KEY, AUTO_INCREMENT                                     | リレーションの一意な識別子                      |
| user_id    | INT          | NOT NULL                                                        | 対象ユーザーの識別子 (`user` テーブルの `id`)     |
| group_id   | INT          | NOT NULL                                                        | 対象グループの識別子 (`permission_group` テーブルの `id`) |
| role       | VARCHAR(50)  | DEFAULT NULL                                                    | グループ内での役割（例: 管理者、メンバー）         |
| created_at | DATETIME     | NOT NULL, DEFAULT CURRENT_TIMESTAMP                             | リレーション作成日時                           |
| updated_at | DATETIME     | NOT NULL, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | リレーション更新日時                           |

## 備考
- 1人のユーザーが複数のグループに所属可能です。
- ユーザーに直接付与する権限設定と併用し、柔軟なアクセス制御を実現します.
- グループ内での役割(role)の定義について、統一性や変更履歴の管理を検討してください.
- 外部キー制約（fk_user, fk_group）の適用や、実装時の一貫性チェックを必ず行うこと.

## 解決策
- ユーザーおよびグループへの外部キー制約を有効化する（必要に応じたインデックスも追加）。
- 役割情報は別テーブルや履歴管理の仕組みを利用して変更履歴を追跡する。

## 固定値一覧
- role: 管理者, メンバー（例）