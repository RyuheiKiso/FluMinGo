# エラーログテーブル設計書

## 概要
システム内で発生したエラーや例外を記録するテーブルです。

## テーブル種類
- トランザクション系

## テーブル定義
- テーブル名: `error_log`

| カラム名      | データ型      | 制約                                      | 説明                                  |
|---------------|---------------|-------------------------------------------|---------------------------------------|
| id            | INT           | PRIMARY KEY, AUTO_INCREMENT               | エラーログの一意な識別子               |
| error_code    | VARCHAR(50)   | DEFAULT NULL                              | エラーコード                         |
| error_message | TEXT          | NOT NULL                                  | エラーメッセージ                     |
| stack_trace   | TEXT          | DEFAULT NULL                              | スタックトレース（任意）              |
| occurred_at   | DATETIME      | NOT NULL, DEFAULT CURRENT_TIMESTAMP       | エラー発生日時                       |
| created_at    | DATETIME      | NOT NULL, DEFAULT CURRENT_TIMESTAMP       | レコード作成日時                     |

## サンプルデータ

| id | error_code | error_message         | stack_trace         | occurred_at           | created_at           | updated_at           |
|----|------------|-----------------------|---------------------|-----------------------|----------------------|----------------------|
| 1  | E1001      | NullPointer Exception | ...                 | 2023-10-01 00:00:00   | 2023-10-01 00:00:00  | 2023-10-01 00:00:00  |
| 2  | E2002      | Index out of range    | sample_stack_trace  | 2023-11-05 00:00:00   | 2023-11-05 00:00:00  | 2023-11-05 00:00:00  |
| 3  | E3003      | Database timeout      | timeout_trace       | 2023-12-01 00:00:00   | 2023-12-01 00:00:00  | 2023-12-01 00:00:00  |
| 4  | E4004      | Service unavailable   | trace_info          | 2023-12-15 00:00:00   | 2023-12-15 00:00:00  | 2023-12-15 00:00:00  |
| 5  | E5005      | Service timeout       | timeout_details     | 2023-12-20 00:00:00   | 2023-12-20 00:00:00  | 2023-12-20 00:00:00  |
| 6  | E6006      | Connection refused    | conn_refused_trace  | 2023-12-25 00:00:00   | 2023-12-25 00:00:00  | 2023-12-25 00:00:00  |

## 備考
- エラーの重要度や発生箇所に応じたログ解析に利用できます.
- エラーコード体系の標準化、及びアラート通知システムとの連携を検討してください.
- 統一したエラーコード体系の策定と、エラー時の通知やログ解析のための外部連携を検討すること.

## 解決策
- エラー時に自動通知（メールやチャット連携）する仕組みをアプリケーション層で実装する。
- エラーコードを標準化し、ログ解析ツールと連携してアラートを発する仕組みを構築する。

## 関係テーブル
- `error_summary`: エラー集計情報を管理します。
