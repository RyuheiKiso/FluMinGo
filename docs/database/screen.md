# 機能（画面）管理テーブル設計書

## 概要
アプリケーション内の各画面に関する情報を管理するテーブルです。

## テーブル種類
- マスタ系

## テーブル定義
- テーブル名: `screen`

| カラム名     | データ型      | 制約                                    | 説明                                   |
|--------------|---------------|-----------------------------------------|----------------------------------------|
| id           | INT           | PRIMARY KEY, AUTO_INCREMENT             | 画面の一意な識別子                       |
| parent_id    | INT           | DEFAULT NULL                            | 親画面のID（NULLの場合は最上位の画面）    |
| screen_name  | VARCHAR(100)  | NOT NULL, UNIQUE                        | 画面の名称                             |
| route        | VARCHAR(255)  | NOT NULL                                | 画面へのルーティングパス                |
| description  | TEXT          | DEFAULT NULL                            | 画面の詳細説明                         |
| icon         | VARCHAR(255)  | DEFAULT NULL                            | アイコンのパスまたは識別子               |
| created_at   | DATETIME      | NOT NULL, DEFAULT CURRENT_TIMESTAMP     | レコード作成日時                        |
| updated_at   | DATETIME      | NOT NULL, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | レコード更新日時          |

## 備考
- `screen_name`は各画面を一意に識別するための名称です。
- `route`は画面遷移管理に使用します.
- 親画面との階層関係や、parent_idに対する外部キー制約の設定、及び一貫性チェックの検討を推奨します.
- 必要に応じて追加カラムやリレーションの設定を検討してください.
- 親画面（parent_id）に対する外部キー制約や階層の整合性チェックを実装すること.

## 解決策
- parent_idに対して外部キー制約を追加し、存在しない画面参照を防止する。
- 階層整合性を保つためのチェックロジックをアプリケーション側に実装する。

## 関係テーブル
- `screen_permission`: 各画面に対するアクセス権限を管理します。

## サンプルデータ

| id | parent_id | screen_name    | route            | description    | icon         | created_at           | updated_at           |
|----|-----------|----------------|------------------|----------------|--------------|----------------------|----------------------|
| 1  | NULL      | ホーム         | /home            | メイン画面     | home-icon    | 2023-10-01 00:00:00  | 2023-10-01 00:00:00  |
| 2  | 1         | プロフィール | /profile         | ユーザープロフィール | profile-icon | 2023-11-05 00:00:00  | 2023-11-05 00:00:00  |
| 3  | 1         | 設定         | /settings        | ユーザー設定   | settings-icon| 2023-12-01 00:00:00  | 2023-12-01 00:00:00  |
| 4  | 1         | お問い合わせ | /contact         | お問い合わせフォーム | contact-icon | 2023-12-15 00:00:00  | 2023-12-15 00:00:00  |
| 5  | 2         | ヘルプ       | /help            | ヘルプ画面             | help-icon    | 2023-12-20 00:00:00  | 2023-12-20 00:00:00  |
| 6  | 3         | お知らせ     | /news            | お知らせ画面         | news-icon    | 2023-12-25 00:00:00  | 2023-12-25 00:00:00  |
