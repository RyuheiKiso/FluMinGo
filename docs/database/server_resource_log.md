# サーバーリソース使用状況ログテーブル設計書

## 概要
サーバーのCPU使用率、メモリ使用率、ディスク使用量、ネットワークトラフィック等を定期的に記録し、
システムパフォーマンスの監視および改善に役立てるためのテーブルです。

## テーブル種類
- トランザクション系

## テーブル定義
- テーブル名: `server_resource_log`

| カラム名         | データ型       | 制約                                      | 説明                                          |
|------------------|----------------|-------------------------------------------|-----------------------------------------------|
| id               | INT            | PRIMARY KEY, AUTO_INCREMENT               | ログの一意な識別子                             |
| server_name      | VARCHAR(100)   | NOT NULL                                  | サーバー名またはホスト名                        |
| cpu_usage        | DECIMAL(5,2)   | NOT NULL                                  | CPU使用率（例: 75.50）                         |
| memory_usage     | DECIMAL(5,2)   | NOT NULL                                  | メモリ使用率（例: 65.30）                        |
| disk_usage       | DECIMAL(5,2)   | NOT NULL                                  | ディスク使用量（パーセンテージ）                  |
| network_in       | DECIMAL(10,2)  | DEFAULT NULL                              | ネットワーク受信量（MB単位、例: 123.45）          |
| network_out      | DECIMAL(10,2)  | DEFAULT NULL                              | ネットワーク送信量（MB単位、例: 67.89）           |
| log_timestamp    | DATETIME       | NOT NULL                                  | 記録時刻                                      |
| created_at       | DATETIME       | NOT NULL, DEFAULT CURRENT_TIMESTAMP       | レコード作成日時                             |
| updated_at       | DATETIME       | NOT NULL, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | レコード更新日時                |

## サンプルデータ
| id | server_name | cpu_usage | memory_usage | disk_usage | network_in | network_out | log_timestamp       | created_at           | updated_at           |
|----|-------------|-----------|--------------|------------|------------|-------------|---------------------|----------------------|----------------------|
| 1  | server1     | 75.3      | 65.5         | 80.2       | 123.45     | 67.89       | 2023-10-01 10:00:00 | 2023-10-01 10:00:00 | 2023-10-01 10:00:00 |
| 2  | server2     | 55.2      | 45.3         | 60.1       | 223.45     | 167.89      | 2023-10-02 10:00:00 | 2023-10-02 10:00:00 | 2023-10-02 10:00:00 |
| 3  | server3     | 85.1      | 75.4         | 90.3       | 323.45     | 267.89      | 2023-10-03 10:00:00 | 2023-10-03 10:00:00 | 2023-10-03 10:00:00 |
| 4  | server4     | 65.0      | 55.2         | 70.4       | 423.45     | 367.89      | 2023-10-04 10:00:00 | 2023-10-04 10:00:00 | 2023-10-04 10:00:00 |
| 5  | server5     | 95.4      | 85.6         | 100.5      | 523.45     | 467.89      | 2023-10-05 10:00:00 | 2023-10-05 10:00:00 | 2023-10-05 10:00:00 |
| 6  | server6     | 45.3      | 35.1         | 50.6       | 623.45     | 567.89      | 2023-10-06 10:00:00 | 2023-10-06 10:00:00 | 2023-10-06 10:00:00 |

## 備考
- 定期バッチや監視システムと連携し、定期的なデータ取得・登録を行ってください.
- 長期間の保存時は、パーティション管理や集計テーブルとの連携を検討してください.

## 関係テーブル
- `server`: サーバー情報を参照する場合があります。
